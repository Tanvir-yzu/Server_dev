<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Profile - {{ user.get_full_name|default:user.email }}</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            display: ['Plus Jakarta Sans', 'system-ui', 'sans-serif'],
          },
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
              950: '#082f49',
            },
            accent: {
              50: '#faf5ff',
              100: '#f3e8ff',
              200: '#e9d5ff',
              300: '#d8b4fe',
              400: '#c084fc',
              500: '#a855f7',
              600: '#9333ea',
              700: '#7e22ce',
              800: '#6b21a8',
              900: '#581c87',
              950: '#3b0764',
            },
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-out',
            'slide-up': 'slideUp 0.5s ease-out',
            'slide-down': 'slideDown 0.3s ease-out',
            'scale-in': 'scaleIn 0.3s ease-out',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'float': 'float 3s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            slideDown: {
              '0%': { transform: 'translateY(-10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: '0' },
              '100%': { transform: 'scale(1)', opacity: '1' },
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
          },
        },
      },
    }
  </script>
  
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
    
    /* Glassmorphism effect */
    .glass {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.8);
    }
    
    /* Gradient text */
    .gradient-text {
      background: linear-gradient(135deg, #0ea5e9 0%, #a855f7 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* Input focus styles */
    .input-field {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .input-field:focus {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
    }
    
    /* Button hover effects */
    .btn-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .btn-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(14, 165, 233, 0.25);
    }
    
    .btn-hover:active {
      transform: translateY(0);
    }
    
    /* Card hover effect */
    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    
    /* Profile photo animation */
    .profile-photo {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .profile-photo:hover {
      transform: scale(1.05) rotate(2deg);
      box-shadow: 0 12px 24px rgba(14, 165, 233, 0.25);
    }
    
    /* Shimmer effect for loading */
    .shimmer {
      background: linear-gradient(
        90deg,
        #f0f0f0 25%,
        #e0e0e0 50%,
        #f0f0f0 75%
      );
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* Smooth transitions for all interactive elements */
    button, a, input, textarea, select {
      transition: all 0.2s ease;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 min-h-screen flex flex-col">

  <!-- Animated Background Elements -->
  <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
    <div class="absolute top-20 left-10 w-72 h-72 bg-primary-200/30 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-20 right-10 w-96 h-96 bg-accent-200/30 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 1.5s;"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-blue-200/20 rounded-full blur-3xl animate-float"></div>
  </div>

  <!-- Navbar -->
  <nav class="sticky top-0 z-50 glass shadow-sm animate-slide-down">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16 sm:h-20">
        <a href="{% url 'profile' %}" class="flex items-center space-x-3 group">
          <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
            <i class="fas fa-user-circle text-white text-lg"></i>
          </div>
          <span class="text-lg sm:text-xl font-bold text-gray-800 group-hover:text-primary-600 transition-colors">Profile</span>
        </a>
        
        <div class="flex items-center space-x-2 sm:space-x-4">
          <a href="{% url 'profile' %}" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">
            <i class="fas fa-arrow-left mr-2"></i>
            <span class="hidden sm:inline">Back</span>
          </a>
          <a href="{% url 'logout' %}" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200">
            <i class="fas fa-sign-out-alt mr-2"></i>
            <span class="hidden sm:inline">Logout</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex-grow relative z-10">
    <!-- Messages -->
    {% if messages %}
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 mt-4 sm:mt-6">
        {% for message in messages %}
          <div class="mb-4 p-4 rounded-xl bg-white/90 backdrop-blur-sm shadow-lg border border-gray-100 animate-slide-up" style="animation-delay: {{ forloop.counter0 }}0.1s;">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <i class="fas fa-info-circle text-primary-500 text-lg"></i>
              </div>
              <div class="ml-3">
                <p class="text-sm sm:text-base text-gray-700">{{ message }}</p>
              </div>
              <button onclick="this.parentElement.parentElement.remove()" class="ml-auto flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Page Header -->
    <div class="relative py-12 sm:py-16 overflow-hidden">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="animate-fade-in">
          <div class="inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl shadow-xl mb-6">
            <i class="fas fa-user-edit text-white text-2xl sm:text-3xl"></i>
          </div>
          <h1 class="text-3xl sm:text-4xl lg:text-5xl font-display font-bold text-gray-900 mb-4">
            Edit <span class="gradient-text">Profile</span>
          </h1>
          <p class="text-base sm:text-lg text-gray-600 max-w-2xl mx-auto">
            Update your personal information and customize your profile
          </p>
        </div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16">
      <div class="max-w-3xl mx-auto animate-slide-up" style="animation-delay: 0.2s;">
        <form method="post" enctype="multipart/form-data" class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-xl border border-gray-100 p-6 sm:p-8 lg:p-10">
          {% csrf_token %}

          <!-- Profile Photo Section -->
          <div class="mb-10 sm:mb-12">
            <div class="text-center">
              <h2 class="text-xl sm:text-2xl font-display font-semibold text-gray-900 mb-6">
                <i class="fas fa-camera mr-2 text-primary-500"></i>Profile Photo
              </h2>
              
              <div class="relative inline-block">
                {% if profile.photo %}
                  <img 
                    src="{{ profile.photo.url }}" 
                    alt="Profile" 
                    class="profile-photo w-32 h-32 sm:w-40 sm:h-40 rounded-full border-4 border-white shadow-xl object-cover mx-auto" 
                    id="photo-preview" 
                    onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                  >
                {% else %}
                  <img 
                    src="" 
                    alt="Profile" 
                    class="profile-photo w-32 h-32 sm:w-40 sm:h-40 rounded-full border-4 border-white shadow-xl object-cover mx-auto" 
                    style="display: none;" 
                    id="photo-preview"
                  >
                {% endif %}
                
                <div 
                  class="w-32 h-32 sm:w-40 sm:h-40 rounded-full mx-auto bg-gradient-to-br from-primary-500 to-accent-500 text-white text-4xl sm:text-5xl font-display font-bold flex items-center justify-center shadow-xl" 
                  {% if profile.photo %}style="display: none;"{% endif %}
                  id="photo-fallback"
                >
                  {{ user.first_name.0|default:user.email.0|upper }}
                </div>
                
                <!-- Camera overlay -->
                <label for="id_photo" class="absolute bottom-0 right-0 sm:right-4 w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-full shadow-lg flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors btn-hover z-10">
                  <i class="fas fa-camera text-primary-600"></i>
                </label>
              </div>
              
              <input 
                type="file" 
                name="photo" 
                id="id_photo"
                accept="image/*"
                class="hidden"
                onchange="previewPhoto(this)"
              />
              
              <p class="text-sm text-gray-500 mt-4">
                <i class="fas fa-info-circle mr-1"></i>
                Upload a profile photo (JPG, PNG, max 5MB)
              </p>
            </div>
          </div>

          <!-- Personal Information -->
          <div class="mb-10">
            <h2 class="text-xl sm:text-2xl font-display font-semibold text-gray-900 mb-6">
              <i class="fas fa-user mr-2 text-primary-500"></i>Personal Information
            </h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- First Name -->
              <div class="group">
                <label for="{{ form.first_name.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                  <i class="fas fa-user mr-1 text-gray-400 group-hover:text-primary-500 transition-colors"></i>First Name
                </label>
                <div class="relative">
                  <input 
                    type="text" 
                    name="{{ form.first_name.name }}" 
                    id="{{ form.first_name.id_for_label }}"
                    value="{{ form.first_name.value|default:'' }}"
                    placeholder="Enter your first name"
                    class="input-field w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 bg-white text-gray-900 placeholder-gray-400"
                  >
                  <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                    <i class="fas fa-user"></i>
                  </div>
                </div>
                {% for error in form.first_name.errors %}
                  <p class="text-red-500 text-sm mt-2 flex items-center animate-slide-up">
                    <i class="fas fa-exclamation-circle mr-2"></i>{{ error }}
                  </p>
                {% endfor %}
              </div>

              <!-- Last Name (if exists) -->
              {% if form.last_name %}
                <div class="group">
                  <label for="{{ form.last_name.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    <i class="fas fa-user mr-1 text-gray-400 group-hover:text-primary-500 transition-colors"></i>Last Name
                  </label>
                  <div class="relative">
                    <input 
                      type="text" 
                      name="{{ form.last_name.name }}" 
                      id="{{ form.last_name.id_for_label }}"
                      value="{{ form.last_name.value|default:'' }}"
                      placeholder="Enter your last name"
                      class="input-field w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 bg-white text-gray-900 placeholder-gray-400"
                    >
                    <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                      <i class="fas fa-user"></i>
                    </div>
                  </div>
                  {% for error in form.last_name.errors %}
                    <p class="text-red-500 text-sm mt-2 flex items-center animate-slide-up">
                      <i class="fas fa-exclamation-circle mr-2"></i>{{ error }}
                    </p>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          </div>

          <!-- Email -->
          <div class="mb-6 sm:mb-8 group">
            <label for="{{ form.email.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
              <i class="fas fa-envelope mr-1 text-gray-400 group-hover:text-primary-500 transition-colors"></i>Email Address
            </label>
            <div class="relative">
              <input 
                type="email" 
                name="{{ form.email.name }}" 
                id="{{ form.email.id_for_label }}"
                value="{{ form.email.value|default:'' }}"
                placeholder="Enter your email address"
                class="input-field w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 bg-white text-gray-900 placeholder-gray-400"
                required
              >
              <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                <i class="fas fa-envelope"></i>
              </div>
            </div>
            {% for error in form.email.errors %}
              <p class="text-red-500 text-sm mt-2 flex items-center animate-slide-up">
                <i class="fas fa-exclamation-circle mr-2"></i>{{ error }}
              </p>
            {% endfor %}
          </div>

          <!-- Social Links -->
          <div class="mb-6 sm:mb-8">
            <h2 class="text-xl sm:text-2xl font-display font-semibold text-gray-900 mb-6">
              <i class="fas fa-link mr-2 text-primary-500"></i>Social Links
            </h2>
            
            <!-- GitHub -->
            <div class="group mb-6">
              <label for="{{ form.github_link.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                <i class="fab fa-github mr-1 text-gray-400 group-hover:text-gray-700 transition-colors"></i>GitHub Profile URL
              </label>
              <div class="relative">
                <input 
                  type="url" 
                  name="{{ form.github_link.name }}" 
                  id="{{ form.github_link.id_for_label }}"
                  value="{{ form.github_link.value|default:'' }}"
                  placeholder="https://github.com/yourusername"
                  class="input-field w-full px-4 py-3 pl-12 border-2 border-gray-200 rounded-xl focus:border-gray-700 focus:ring-0 bg-white text-gray-900 placeholder-gray-400"
                >
                <div class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-700">
                  <i class="fab fa-github text-lg"></i>
                </div>
              </div>
              {% for error in form.github_link.errors %}
                <p class="text-red-500 text-sm mt-2 flex items-center animate-slide-up">
                  <i class="fas fa-exclamation-circle mr-2"></i>{{ error }}
                </p>
              {% endfor %}
              <p class="text-sm text-gray-500 mt-2">
                <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                Example: https://github.com/yourusername
              </p>
            </div>
          </div>

          <!-- Bio -->
          <div class="mb-8 sm:mb-10 group">
            <label for="{{ form.bio.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
              <i class="fas fa-quote-left mr-1 text-gray-400 group-hover:text-primary-500 transition-colors"></i>Bio
            </label>
            <div class="relative">
              <textarea 
                name="{{ form.bio.name }}" 
                id="{{ form.bio.id_for_label }}"
                rows="4"
                placeholder="Tell us about yourself..."
                class="input-field w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 bg-white text-gray-900 placeholder-gray-400 resize-none"
                maxlength="500"
                oninput="updateCharCount(this)"
              >{{ form.bio.value|default:'' }}</textarea>
            </div>
            {% for error in form.bio.errors %}
              <p class="text-red-500 text-sm mt-2 flex items-center animate-slide-up">
                <i class="fas fa-exclamation-circle mr-2"></i>{{ error }}
              </p>
            {% endfor %}
            <div class="flex justify-between items-center mt-2">
              <p class="text-sm text-gray-500">
                <i class="fas fa-info-circle mr-1"></i>
                Share a bit about yourself
              </p>
              <span id="char-count" class="text-sm font-medium text-gray-600 bg-gray-100 px-3 py-1 rounded-full">
                {{ form.bio.value|length|default:0 }} / 500
              </span>
            </div>
          </div>

          <!-- Divider -->
          <div class="border-t border-gray-200 my-8"></div>

          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row justify-center gap-4 sm:gap-6">
            <button 
              type="submit" 
              class="btn-hover flex items-center justify-center px-8 py-4 bg-gradient-to-r from-primary-500 to-accent-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl text-base sm:text-lg min-w-[160px]"
            >
              <i class="fas fa-save mr-2"></i>
              Save Changes
            </button>
            <a 
              href="{% url 'profile' %}" 
              class="btn-hover flex items-center justify-center px-8 py-4 bg-white border-2 border-gray-200 text-gray-700 font-semibold rounded-xl hover:border-gray-300 hover:bg-gray-50 text-base sm:text-lg min-w-[160px]"
            >
              <i class="fas fa-times mr-2"></i>
              Cancel
            </a>
          </div>
        </form>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="relative z-10 bg-white/80 backdrop-blur-sm border-t border-gray-200 mt-auto">
    <div class="container mx-auto px-4 py-6">
      <p class="text-center text-sm text-gray-600">
        <i class="fas fa-heart text-red-500 mr-1"></i>
        &copy; {% now "Y" %} Server Dev Project. All rights reserved.
      </p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // Photo preview function with enhanced animations
    function previewPhoto(input) {
      const preview = document.getElementById('photo-preview');
      const fallback = document.getElementById('photo-fallback');
      
      if (input.files && input.files[0]) {
        const file = input.files[0];
        
        // Validate file size
        if (file.size > 5 * 1024 * 1024) {
          alert('File size must be less than 5MB');
          input.value = '';
          return;
        }
        
        // Validate file type
        if (!file.type.match('image.*')) {
          alert('Please select an image file');
          input.value = '';
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.src = e.target.result;
          preview.style.display = 'block';
          fallback.style.display = 'none';
          
          // Add animation class
          preview.classList.add('animate-scale-in');
          setTimeout(() => {
            preview.classList.remove('animate-scale-in');
          }, 300);
        };
        reader.readAsDataURL(file);
      }
    }

    // Character count function with visual feedback
    function updateCharCount(textarea) {
      const charCount = document.getElementById('char-count');
      const currentLength = textarea.value.length;
      const percentage = (currentLength / 500) * 100;
      
      charCount.textContent = `${currentLength} / 500`;
      
      // Update color based on character count
      if (percentage >= 100) {
        charCount.className = 'text-sm font-medium bg-red-100 text-red-600 px-3 py-1 rounded-full animate-pulse';
      } else if (percentage >= 90) {
        charCount.className = 'text-sm font-medium bg-yellow-100 text-yellow-600 px-3 py-1 rounded-full';
      } else if (percentage >= 70) {
        charCount.className = 'text-sm font-medium bg-blue-100 text-blue-600 px-3 py-1 rounded-full';
      } else {
        charCount.className = 'text-sm font-medium bg-gray-100 text-gray-600 px-3 py-1 rounded-full';
      }
    }

    // Enhanced email validation
    document.addEventListener('DOMContentLoaded', function() {
      const emailInput = document.getElementById('{{ form.email.id_for_label }}');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      
      if (emailInput) {
        emailInput.addEventListener('input', function() {
          if (this.value && !emailRegex.test(this.value)) {
            this.setCustomValidity('Please enter a valid email address');
            this.classList.add('border-red-300');
          } else {
            this.setCustomValidity('');
            this.classList.remove('border-red-300');
          }
        });
        
        emailInput.addEventListener('blur', function() {
          if (this.value && emailRegex.test(this.value)) {
            // Add success indicator
            this.classList.add('border-green-300');
          } else {
            this.classList.remove('border-green-300');
          }
        });
      }

      // Add focus animations to all inputs
      const inputs = document.querySelectorAll('input, textarea');
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.classList.add('scale-[1.02]');
        });
        
        input.addEventListener('blur', function() {
          this.parentElement.classList.remove('scale-[1.02]');
        });
      });

      // Auto-dismiss messages after 5 seconds
      const messages = document.querySelectorAll('[class*="message"]');
      messages.forEach(message => {
        setTimeout(() => {
          message.style.opacity = '0';
          message.style.transform = 'translateY(-10px)';
          message.style.transition = 'all 0.3s ease';
          setTimeout(() => message.remove(), 300);
        }, 5000);
      });

      // Initialize character count on page load
      const bioTextarea = document.getElementById('{{ form.bio.id_for_label }}');
      if (bioTextarea) {
        updateCharCount(bioTextarea);
      }
    });

    // Add smooth scroll behavior
    document.documentElement.style.scrollBehavior = 'smooth';

    // Prevent form submission on Enter key in textarea
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && e.target.tagName === 'TEXTAREA') {
        e.stopPropagation();
      }
    });
  </script>
</body>
</html>